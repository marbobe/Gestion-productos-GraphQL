# ---------------------------------------------------
# ARCHIVO: src/schema/product.graphql
# DESCRIPCIÓN: Definición del esquema GraphQL.
# Define los Tipos, Queries y Mutaciones disponibles.
# ---------------------------------------------------

"""
Representa un artículo del inventario disponible para la venta.
Contiene información básica, precio y control de stock.
"""
type Product {
  id: ID!
  name: String!
  description: String
  price: Float!
  stock: Int!
  createdAt: String!
}

# ---------------------------------------------------
# DEFINICIÓN DE RAÍZ (ROOT TYPES)
# ---------------------------------------------------

type Query {
  # Definido como placeholder. Los campos reales se añadirán abajo.
  _empty: String
}

type Mutation {
  # Definido como placeholder. Los campos reales se añadirán abajo.
  _empty: String
}

# ---------------------------------------------------
# QUERIES (Lectura de datos)
# ---------------------------------------------------

extend type Query {
  """
  Obtiene una lista paginada de productos.
  Permite filtrar por stock mínimo y ordenar por precio.
  """
  productsList(
    stockMin: Int
    sortBy: String
    limit: Int #productos por pagina
    offset: Int #cuantos saltar
  ): [Product]

  """
  Busca un producto específico por su ID único.
  Devuelve null si no existe.
  """
  productById(id: ID!): Product

  """
  Busca productos cuyo nombre coincida parcialmente con el término de búsqueda (Regex).
  Devuelve una lista de coincidencias.
  """
  searchByName(name: String): [Product]
}

# ---------------------------------------------------
# MUTATIONS (Escritura/Modificación de datos)
# ---------------------------------------------------

extend type Mutation {
  """
  Crea un nuevo producto en el sistema.
  Valida que el precio y el stock no sean negativos.
  """
  addProduct(
    name: String!
    description: String
    price: Float!
    stock: Int!
  ): Product

  """
  Actualiza los datos de un producto existente.
  Solo los campos enviados serán modificados (Patch).
  """
  updateProduct(
    id: ID!
    name: String
    description: String
    price: Float
    stock: Int
  ): Product

  """
  Elimina un producto de la base de datos permanentemente.
  Retorna el producto eliminado para confirmación.
  """
  deleteProduct(id: ID!): Product
}
